{% extends "base.html" %}

{% block content %}
<div style="display: flex;">
    <!-- Sidebar Filter -->
    <aside style="width: 25%; padding: 10px; border-right: 1px solid #ddd;">
        <h3>Filter Jobs</h3>
        <form method="GET">
            <label for="min_pay">Min Pay:</label>
            <input type="number" name="min_pay" id="min_pay" placeholder="Min Pay"><br>

            <label for="max_pay">Max Pay:</label>
            <input type="number" name="max_pay" id="max_pay" placeholder="Max Pay"><br>

            <label for="topic">Topic:</label>
            <input type="text" name="keyword" id="keyword" placeholder="General"><br>

            <button type="submit">Filter</button>
        </form>

        <h3>Browse Topics!</h3>
        <hr>
        {% for topic in topics %}
            <div>
                <a href="{% url '' %}?q={{topic}}">{{topic}}</a>
            </div>
        {% endfor %}
    </aside>

    <!-- Main Job Listings -->
    <section style="width: 75%; padding: 10px;">
        <h2>Job Listings</h2>
        <a href="{% url 'post_job' %}">Post a New Job</a>
        <ul>
    {% for job in jobs %}
    <li>
        <h3 class="job-title">{{ job.title }}</h3>
        <p class="job-topic"><strong>Topic:</strong> {{ job.topic }}</p>
        <p class="job-description">{{ job.description }}</p>
        
        <strong class="job-budget">Budget: ${{ job.budget }}</strong>
        <br>
        <small class="job-meta">
            <strong>Posted by:</strong> {{ job.client.username }} | 
            <strong>Deadline:</strong> {{ job.deadline }}
        </small>

        <hr>

        <div class="job-actions">
            <!-- Edit Button -->
            <form action="{% url 'edit_job' job.id %}" method="GET" style="display:inline;">
                <button type="submit" class="edit-button" onclick="return confirm('Are you sure you want to edit this job?');">
                    Edit
                </button>
            </form>

            <!-- Delete Button -->
            <form action="{% url 'delete_job' job.id %}" method="POST" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="delete-button" onclick="return confirm('Are you sure you want to delete this job?');">
                    Delete
                </button>
            </form>
        </div>

        <hr>
        </li>
        {% empty %}
        <li>No jobs available.</li>
        {% endfor %}
    </ul>
    </section>
</div>

{% endblock %}
